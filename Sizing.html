<!DOCTYPE html>


<html>
    <head>
      <link rel="stylesheet" href="./css/style.css"/>
      <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
        <style>
            #VRcharacter{
                width:30%;
                border:3px solid black;
                display:inline-block;
                float:left;
            }
            #VRcharacter img{
                height:300px;
            }
            #sizes{
                width:30%;
                border:3px solid black;
                display:inline-block;
                float:left;
            }
            #results{
                width:35%;
                display:block;    
                float:left;
                
            }
            #bottom{
                width:100%;
                display:inline-block;                
            }
            #downloadbutton{
                float:right;
            }
            .modal {
                display: none; /* Hidden by default */
                position: fixed; /* Stay in place */
                z-index: 1; /* Sit on top */
                padding-top: 100px; /* Location of the box */
                left: 0;
                top: 0;
                width: 100%; /* Full width */
                height: 100%; /* Full height */
                overflow: auto; /* Enable scroll if needed */
                background-color: rgb(0,0,0); /* Fallback color */
                background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            }

            /* Modal Content */
            .modal-content {
                background-color: #fefefe;
                margin: auto;
                padding: 20px;
                border: 1px solid #888;
                width: 80%;
            }

            /* The Close Button */
            .close {
                color: #aaaaaa;
                float: right;
                font-size: 28px;
                font-weight: bold;
            }

            .close:hover,
            .close:focus {
                color: #000;
                text-decoration: none;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
      <nav>
          <div id="companyName">
            OutFit DoesFit
          </div>
        <ul>
            <li class="navLink"><a href="Create_Account.html">Register</a></li>
            <li class="navLink"><a href="Login.html">Login</a></li>
            <li class="navLink"><a href="Comparsion.html">Fitting Room</a></li>
            <li class="navLink"><a href="Sizing.html">Sizing</a></li>
            <li class="navLink"><a href="Shopping_Page.html">Shopping</a></li>
          </ul>
      </nav>

    <div id="VRcharacter">
        <img src="pikachu.png" alt="virtualcharacter" >
        <button type="button">Change Pose</button>
        <button type="button">Rotate Left</button>
        <button type="button">Rotate Right</button>
    </div>
    <div id="sizes">
        
        <table>
            <thead>
                <tr colspan="2">
                    <td><h2>Your Measurments</h2></td>
                </tr>
                
            </thead>
            <tbody>
                <tr>
                    <td>Neck</td>
                    <td><input type="number" name="necksize" value="15" min="1" max="99" id="necksize">
                </tr>
                <tr>
                    <td>Arm</td>
                    <td><input type="number" name="armsize" value="24" min="1" max="99" id="armsize">
                </tr>
                <tr>
                    <td>Chest</td>
                    <td><input type="number" name="chestsize" value="34" min="1" max="99" id="chestsize">
                </tr>
                <tr>
                    <td>Waist</td>
                    <td><input type="number" name="waistsize" value="31" min="1" max="99" id="waistsize">
                </tr>
                <tr>
                    <td>Leg Length</td>
                    <td><input type="number" name="leglength" value="30" min="1" max="99" id="leglength">
                </tr>
            </tbody>
        </table>
        <button type="button" id="more">More Measurments</button>
        <button type="button" id="updatesize" onclick="updateFirebase()">Update Size</button>
    </div>
    <div id="results">
      <h2>Your Results</h2>
        <table>
            <thead>
                <tr>        
                    <td><h3>Top Size</h3></td>
                </tr>
                <tr>
                    <td>        
                        <select id="topsList" onchange="getSelectValue();">
                          <option value="tshirt">T-Shirt</option>
                          <option value="sweater">Sweater</option>
                          <option value="buttondown">Button-Down</option>
                          <option value="jacket">Jacket</option>
                        </select>
                    </td>
                </tr>
            </thead>
            <tr>
                <th>Brands</th>
                <th>Size</th>
            </tr>
            <tr>
                <td>Addias</td>
                <td id="addiasTop">Small</td>
            </tr>
            <tr>
                <td>Nike</td>
                <td id="nikeTop">Small</td>
            </tr>
            <tr>
                <td>Uniqlo</td>
                <td id="uniqloTop">Medium</td>
            </tr>
        </table>
        <table>
            <thead>
                <tr>        
                    <td><h3>Bottom Size</h3></td>
                </tr>
                <tr>
                    <td>        
                        <select>
                          <option value="Jeans">Jeans</option>
                          <option value="Shorts">Shorts</option>
                          <option value="Joggers">Joggers</option>
                          <option value="Skirts">Skirts</option>
                        </select>
                    </td>
                </tr>
            </thead>
            <tr>
                <th>Brands</th>
                <th>Size</th>
            </tr>
            <tr>
                <td>Addias</td>
                <td>30W/30L</td>
            </tr>
            <tr>
                <td>Nike</td>
                <td>31W/30L</td>
            </tr>
            <tr>
                <td>Uniqlo</td>
                <td>31W/31W</td>
            </tr>
        </table> 
      </div>
    <div id="bottom">
        <button type="button" id="backbutton" onclick="location.href='Upload.html';">Back</button>
        <button type="button" id="downloadbutton" onclick="location.href='Download.html';">Download Extension</button>
        
    </div>
    <!-- The Modal -->
    <div id="myModal" class="modal">

      <!-- Modal content -->
      <div class="modal-content">
        <span class="close">&times;</span>
        <table>
            <thead>
                <tr colspan="2">
                    <td><h2>Top:</h2></td>
                </tr>                
            </thead>
            <tbody>
                <tr>
                    <td>Neck</td>
                    <td><input type="number" name="necksize" min="1" max="99" value="10"/>
                </tr>
                <tr>
                    <td>Arm</td>
                    <td><input type="number" name="armsize" value="20" min="1" max="99">
                </tr>
                <tr>
                    <td>Chest</td>
                    <td><input type="number" name="chestsize" value="20" min="1" max="99">
                </tr>
                <tr>
                    <td>Belly</td>
                    <td><input type="number" name="bellysize" value="20" min="1" max="99">
                </tr>
                <tr>
                    <td>Length</td>
                    <td><input type="number" name="toplength" value="20" min="1" max="99">
                </tr>
            </tbody>
        </table>
        <table>
            <thead>
                <tr colspan="2">
                    <td><h2>Bottom:</h2></td>
                </tr>                
            </thead>
            <tbody>
                <tr>
                    <td>Hip</td>
                    <td><input type="number" name="hipsize" value="20" min="1" max="99">
                </tr>
                <tr>
                    <td>Inseam</td>
                    <td><input type="number" name="inseam" value="20" min="1" max="99">
                </tr>
                <tr>
                    <td>Outseam</td>
                    <td><input type="number" name="outseam" value="20" min="1" max="99">
                </tr>
                <tr>
                    <td>Taper</td>
                    <td><input type="number" name="taper" value="20" min="1" max="99">
                </tr>
                <tr>
                    <td>Length</td>
                    <td><input type="number" name="leglength" value="20" min="1" max="99">
                </tr>
            </tbody>
        </table>
        <h2>Fit/Style:</h2>
        <label for="regularfit">Regular</label>      
        <input type="radio" id="regularfit" name="fit"><br>
        <label for="slimfit">Slim</label>      
        <input type="radio" id="slimfit" name="fit"><br>
        <label for="loosefit">Loose</label>      
        <input type="radio" id="loosefit" name="fit">
        <button type="button" id="moreUpdate">Update Size</button>
      </div>
    </div>
    <script>
        //More Sizes- Update button
        var moreUpBtn = document.getElementById("moreUpdate");
        moreUpBtn.onclick = function(){
          modal.style.display="none";
        }
        // Get the modal
        var modal = document.getElementById('myModal');

        // Get the button that opens the modal
        var btn = document.getElementById("more");

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks the button, open the modal 
        btn.onclick = function() {
            modal.style.display = "block";
        }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
      <script>
          // Initialize Firebase
        var config = {
          apiKey: "AIzaSyBpBAL3fW-COwrq61n_e5f8LVT_nRocgtM",
          authDomain: "test-a046f.firebaseapp.com",
          databaseURL: "https://test-a046f.firebaseio.com",
          projectId: "test-a046f",
          storageBucket: "test-a046f.appspot.com",
          messagingSenderId: "1063634305060"
        };
        firebase.initializeApp(config);
        console.log(firebase);
        
        function saveFirebase(){
          const fb = firebase.database().ref();
          //get field val
          armSize = document.getElementById('armsize').value;
          neckSize = document.getElementById("necksize").value;
          data = {neckSize, armSize};
          //update firebase
          fb.child('users/').set(data);         
        }
        function updateFirebase(){
          const fb = firebase.database().ref();
          //get field val
          armSize = document.getElementById('armsize').value;
          neckSize = document.getElementById("necksize").value;
          chestSize= document.getElementById('chestsize').value;
          waistSize = document.getElementById('waistsize').value;
          legLength = document.getElementById('leglength').value;
          data = {neckSize, armSize,chestSize,waistSize,legLength};
          //update firebase
          fb.child('users/').update(data);
        }
        function getData(selectedData){
            var refNike = firebase.database().ref(selectedData).child("nike");
            refNike.on('value', function(snapshot){
            document.getElementById("nikeTop").innerHTML = snapshot.val();
               });
            var refAddias = firebase.database().ref(selectedData).child("addias");
            refAddias.on('value', function(snapshot){
            document.getElementById("addiasTop").innerHTML = snapshot.val();
               }); 
            var refUniqlo = firebase.database().ref(selectedData).child("uniqlo");
            refUniqlo.on('value', function(snapshot){
            document.getElementById("uniqloTop").innerHTML = snapshot.val();
               }); 
        }
        function getSelectValue(){
          var selectedValue = document.getElementById("topsList").value;
          console.log(selectedValue);
          if (selectedValue == "sweater"){
            getData("sweater");
          }
        }
        
      </script>
    </body>
</html>
